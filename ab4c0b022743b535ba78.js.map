{"version":3,"sources":["webpack:///./app/index.tsx","webpack:///./app/models/content.model.ts","webpack:///./app/components/editor/content/editor-content-item.tsx","webpack:///./app/components/editor/content/editor-content-area.tsx","webpack:///./app/containers/editor/editor.container.tsx","webpack:///./app/utils/index.ts","webpack:///./app/containers/editor/index.ts","webpack:///./app/containers/editor/style.css","webpack:///./app/actions/content.actions.ts","webpack:///./app/components/editor/content/style.css?5979","webpack:///./app/middleware/logger.ts","webpack:///./app/reducers/content.reducer.ts","webpack:///./app/reducers/index.ts","webpack:///./main.tsx","webpack:///./app/store/index.ts"],"names":["module","__webpack_require__","d","__webpack_exports__","App","react__WEBPACK_IMPORTED_MODULE_0__","react_router__WEBPACK_IMPORTED_MODULE_1__","react_router__WEBPACK_IMPORTED_MODULE_2__","app_containers_editor__WEBPACK_IMPORTED_MODULE_3__","react_hot_loader__WEBPACK_IMPORTED_MODULE_4__","_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__","theme","Object","typography","useNextVariants","path","component","ContentModel","editor_content_item_EditorContentItem","_super","EditorContentItem","props","context","_this","call","this","onResize","e","direction","elementRef","delta","position","item","convertPxToNumber","v","Number","replace","resize","id","width","style","height","__assign","onDragStop","move","x","y","onRemove","remove","__extends","prototype","render","imageContainerStyle","backgroundImage","previewUrl","backgroundSize","react","lib","key","className","content_style","size","lockAspectRatio","enableResizing","top","right","bottom","left","topRight","bottomRight","bottomLeft","topLeft","onClick","Tooltip_default","a","title","enterDelay","leaveDelay","Close_default","editor_content_area_EditorContentArea","EditorContentArea","apply","arguments","refCallback","element","getSize","getBoundingClientRect","editor_content_area_extends","_a","items","ref","map","Type","ThumbnailTypes","editor_container_Editor","Editor","getEditorSize","editorSize","addContent","type","data","actions","add","options","setState","isSaved","content","window","scrollTo","addImage","event","target","files","file","uploadImageRef","img","Image","onload","reader","FileReader","readAsDataURL","result","toString","IMAGE","URL","revokeObjectURL","src","current","value","createObjectURL","addVideo","url","imageURL","getVideoId","high","VIDEO","onItemMove","params","onItemResize","onItemRemove","length","save","onAddImageClick","click","menuEl","onAddVideoClick","videoDialogOpen","onMenuOpen","currentTarget","onMenuClose","onVideoDialogClose","onVideoDialogAdd","state","videoUrl","onVideoUrlChange","editor_container_extends","urlParts","split","includes","pop","Button_default","variant","color","aria-label","aria-haspopup","Add_default","Menu_default","anchorEl","open","Boolean","onClose","MenuItem_default","Dialog_default","DialogTitle_default","DialogContent_default","DialogContentText_default","TextField_default","autoFocus","margin","label","onChange","fullWidth","DialogActions_default","Badge_default","badgeContent","invisible","join","__decorate","es","ownProps","dispatch","redux","omitKeys","_i","keys","reduce","res","omit","content_actions","exports","container","controls","hidden","status","statusText","saved","empty","ContentActions","redux_actions__WEBPACK_IMPORTED_MODULE_0__","ADD","REMOVE","MOVE","RESIZE","rndContainer","pointNE","pointNW","pointSW","pointSE","logger","store","next","action","contentReducer","handleActions","payload","coordY","max","Math","coordX","round","filter","rootReducer","main_history","history_es","main_store","initialState","middleware","configureStore","react_dom","Router","history","app","document","getElementById"],"mappings":"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","file":"ab4c0b022743b535ba78.js","sourcesContent":["import * as React from 'react';\nimport { Route, Switch } from 'react-router';\nimport { Editor } from 'app/containers/editor';\nimport { hot } from 'react-hot-loader';\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\n\nconst theme = createMuiTheme({\n  typography: {\n    useNextVariants: true,\n  },\n});\n\nexport const App = hot(module)(() => (\n  <MuiThemeProvider theme={theme}>\n    <Switch>\n      <Route path=\"/\" component={Editor} />\n    </Switch>\n  </MuiThemeProvider>\n));\n","export interface ContentModel {\n  id: number;\n  type: ContentModel.Type;\n  previewUrl: string; // base64 for image, video thumbnail for video\n  data: string;       // base64 for image, video url for video\n  width: number;\n  height: number;\n  position: ContentModel.Coordinates;\n  options?: {\n    editorSize?:  ClientRect | DOMRect\n  }\n}\n\nexport namespace ContentModel {\n  export enum Type {\n    IMAGE = 'image',\n    VIDEO = 'video'\n  }\n\n  export interface Coordinates {\n    x: number;\n    y: number;\n  }\n}\n","import * as React from 'react';\nimport { DraggableData, Position, ResizableDelta, Rnd } from 'react-rnd';\n\nimport CloseIcon from '@material-ui/icons/Close';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport * as style from './style.css';\nimport { ContentModel } from 'app/models';\nimport { ContentActions } from 'app/actions/content.actions';\n\nexport namespace EditorContentItem {\n  export interface Props {\n    item: ContentModel;\n    remove: typeof ContentActions.remove;\n    move: typeof ContentActions.move;\n    resize: typeof ContentActions.resize;\n  }\n\n  export type ResizableDirection = 'top' | 'right' | 'bottom' | 'left' | 'topRight' | 'bottomRight' | 'bottomLeft' | 'topLeft';\n}\n\nexport class EditorContentItem extends React.Component<EditorContentItem.Props> {\n  constructor(props: EditorContentItem.Props, context?: any) {\n    super(props, context);\n  }\n\n  onResize = (\n    e: MouseEvent | TouchEvent,\n    direction: EditorContentItem.ResizableDirection,\n    elementRef: HTMLDivElement,\n    delta: ResizableDelta,\n    position: Position\n  ) => {\n    const { item } = this.props;\n    const convertPxToNumber = (v: string) => Number(v.replace(/px/i, ''));\n\n    this.props.resize({\n      id: item.id,\n      width: convertPxToNumber(elementRef.style.width),   // we keep dimensions as a number\n      height: convertPxToNumber(elementRef.style.height),\n      position: { ...position }\n    });\n  };\n\n  onDragStop = (e: Event, d: DraggableData) => {\n    const { item } = this.props;\n    this.props.move({\n      id: item.id,\n      position: { x: d.x, y: d.y }\n    });\n  };\n\n  onRemove = () => {\n    const { item } = this.props;\n    this.props.remove({\n      id: item.id,\n    });\n  };\n\n  render() {\n    const { item } = this.props;\n\n    const imageContainerStyle = {\n      backgroundImage: `url(${item.previewUrl})`,\n      backgroundSize: 'contain',\n      width: item.width,\n      height: item.height\n    };\n\n    return (\n      <Rnd\n        key={item.id}\n        className={style.rndContainer}\n        size={{ width: item.width, height: item.height }}\n        position={{ x: item.position.x, y: item.position.y }}\n        lockAspectRatio={true}\n        enableResizing={{\n          top: false,\n          right: false,\n          bottom: false,\n          left: false,\n          topRight: true,\n          bottomRight: true,\n          bottomLeft: true,\n          topLeft: true\n        }}\n        onDragStop={this.onDragStop}\n        onResize={this.onResize}\n      >\n        <div style={imageContainerStyle}>\n          <span className={style.pointNE}/>\n          <span className={style.pointNW}/>\n          <span className={style.pointSE}/>\n          <span className={style.pointSW}/>\n          <span className={style.remove} onClick={this.onRemove}>\n            <Tooltip title=\"Remove permanently\" enterDelay={300} leaveDelay={0}>\n              <CloseIcon/>\n            </Tooltip>\n          </span>\n        </div>\n      </Rnd>\n    );\n\n  }\n}\n","import * as React from 'react';\nimport { ContentModel } from 'app/models';\nimport { ContentActions } from 'app/actions/content.actions';\nimport { EditorContentItem } from './editor-content-item';\n\nexport namespace EditorContentArea {\n  export interface Props {\n    items: ContentModel[];\n    remove: typeof ContentActions.remove;\n    move: typeof ContentActions.move;\n    resize: typeof ContentActions.resize;\n    getSize: (size: ClientRect | DOMRect) => void\n  }\n}\n\nexport class EditorContentArea extends React.Component<EditorContentArea.Props> {\n  refCallback = (element: any) => {\n    if (element) {\n      this.props.getSize(element.getBoundingClientRect());\n    }\n  };\n\n  render() {\n    const { items, remove, move, resize } = this.props;\n    return (\n      <div ref={this.refCallback}>\n        {items.map((item) => (\n          <EditorContentItem\n            key={item.id}\n            item={item}\n            remove={remove}\n            move={move}\n            resize={resize}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\n\nimport Button from '@material-ui/core/Button';\nimport AddIcon from '@material-ui/icons/Add';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Badge from '@material-ui/core/Badge';\n\nimport * as style from './style.css';\nimport { RouteComponentProps } from 'react-router';\nimport { RootState } from 'app/reducers';\nimport { ContentActions } from 'app/actions/content.actions';\nimport { connect } from 'react-redux';\nimport { omit } from 'app/utils';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { EditorContentArea } from 'app/components/editor/content';\nimport { ContentModel } from 'app/models';\nimport { ChangeEvent, RefObject } from 'react';\n\n\nexport namespace Editor {\n  export interface Props extends RouteComponentProps<void> {\n    content: RootState.ContentState;\n    actions: ContentActions;\n  }\n\n  export interface State {\n    isSaved: boolean;\n    menuEl: HTMLElement;\n    videoDialogOpen: boolean;\n    videoUrl: string;\n  }\n}\n\nexport enum ThumbnailTypes {\n  default = 'default',      // 120x90\n  high = 'hqdefault',       // 480x360\n  medium = 'mqdefault',     // 320x180\n  standard = 'sddefault',   // 640x480\n  maximum = 'maxresdefault' // 1280x720\n}\n\n\n@connect(\n  (state: RootState, ownProps): Pick<Editor.Props, 'content'> => {\n    return { content: state.content };\n  },\n  (dispatch: Dispatch): Pick<Editor.Props, 'actions'> => ({\n    actions: bindActionCreators(omit(ContentActions, 'Type'), dispatch)\n  })\n)\nexport class Editor extends React.Component<Editor.Props, Editor.State> {\n\n  uploadImageRef: RefObject<HTMLInputElement>;\n  editorSize: ClientRect | DOMRect;\n\n  constructor(props: Editor.Props, context?: any) {\n    super(props, context);\n\n    this.uploadImageRef = React.createRef();\n\n    this.state = {\n      isSaved: true,\n      menuEl: null,\n      videoDialogOpen: false,\n      videoUrl: ''\n    };\n  }\n  \n  // Helpers\n\n  // todo: move to utils\n  getVideoId(url: string) {\n    const urlParts = url.split('?');\n    return urlParts.length > 1 && urlParts[1].includes('v=')\n      ? urlParts[1].split('v=')[1]\n      : url.split('/').pop();\n  };\n\n  getEditorSize = (size: ClientRect | DOMRect) => {\n    this.editorSize = size;\n  };\n\n  // Content handlers\n\n  addContent = (type: ContentModel.Type, previewUrl: string, data: string, width: number, height: number) => {\n    this.props.actions.add({ type, data, previewUrl, width, height, options: { editorSize: this.editorSize } });\n    this.setState({ isSaved: false });\n\n    // scroll to the bottom, but yep, it's a pretty simple trick\n    // todo: get the last added element by ref and scroll into view of it?\n    if (this.props.content[0]) window.scrollTo(0, this.props.content[0].position.y);\n  };\n\n  addImage = (event: ChangeEvent<HTMLInputElement>) => {\n    if (!event.target.files || !event.target.files[0]) {\n      return;\n    }\n\n    const file = event.target.files[0];\n    const addContent = this.addContent;\n    const uploadImageRef = this.uploadImageRef;\n\n    const img = new Image();\n    img.onload = () => {  // we use an Image object here to get original width and height\n      let reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {   // read base64 string\n        const data = reader.result.toString();\n        addContent(ContentModel.Type.IMAGE, data, data, img.width, img.height);\n        URL.revokeObjectURL(img.src); // cleanup memory\n        uploadImageRef.current.value = '';  // cleanup file input\n      };\n    };\n\n    img.src = URL.createObjectURL(file);\n  };\n\n  addVideo = (url: string) => {\n    if (!url) {\n      return;\n    }\n\n    const videoId = this.getVideoId(url);\n    const imageURL = `https://img.youtube.com/vi/${videoId}/${ThumbnailTypes.high}.jpg`;\n    const addContent = this.addContent;\n\n    const img = new Image();\n    img.onload = () => {\n      addContent(ContentModel.Type.VIDEO, imageURL, url, img.width, img.height);\n    };\n    img.src = imageURL;\n  };\n\n  onItemMove: typeof ContentActions.move = (params) => {\n    this.setState({ isSaved: false });\n    return this.props.actions.move(params);\n  };\n\n  onItemResize: typeof ContentActions.resize = (params) => {\n    this.setState({ isSaved: false });\n    return this.props.actions.resize(params);\n  };\n\n  onItemRemove: typeof ContentActions.remove = (params) => {\n    this.setState({ isSaved: this.props.content.length === 1 });\n    return this.props.actions.remove(params);\n  };\n\n  save = () => {\n    // todo: save all content data on a server\n    this.setState({ isSaved: true });\n  };\n\n  // Interface handlers\n\n  onAddImageClick = () => {\n    this.uploadImageRef.current.click();\n    this.setState({ menuEl: null });\n  };\n\n  onAddVideoClick = () => {\n    this.setState({\n      videoDialogOpen: true,\n      menuEl: null\n    });\n  };\n\n  onMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\n    this.setState({ menuEl: event.currentTarget });\n  };\n\n  onMenuClose = () => {\n    this.setState({ menuEl: null });\n  };\n\n  onVideoDialogClose = () => {\n    this.setState({ videoDialogOpen: false });\n  };\n\n  onVideoDialogAdd = () => {\n    if (this.state.videoUrl) {\n      this.addVideo(this.state.videoUrl);\n    }\n    this.setState({\n      videoUrl: '',\n      videoDialogOpen: false\n    });\n  };\n\n  onVideoUrlChange = (event: ChangeEvent<HTMLInputElement>) => {\n    this.setState({ videoUrl: event.target.value });\n  };\n\n  // Render\n\n  render() {\n    const { content } = this.props;\n    const { menuEl, videoDialogOpen, videoUrl, isSaved } = this.state;\n\n    return (\n      <div>\n        <div className={style.container}>\n          <EditorContentArea\n            items={content}\n            remove={this.onItemRemove}\n            move={this.onItemMove}\n            resize={this.onItemResize}\n            getSize={this.getEditorSize}\n          />\n\n          <div className={style.controls}>\n            <Tooltip title=\"Add a new image or video\" enterDelay={500} leaveDelay={0}>\n              <Button\n                variant=\"fab\"\n                color=\"primary\"\n                aria-label=\"Add\"\n                aria-haspopup=\"true\"\n                onClick={this.onMenuOpen}\n              >\n                <AddIcon/>\n              </Button>\n            </Tooltip>\n            <Menu\n              id=\"add-menu\"\n              anchorEl={menuEl}\n              open={Boolean(menuEl)}\n              onClose={this.onMenuClose}\n            >\n              <MenuItem onClick={this.onAddImageClick}>Add a new image</MenuItem>\n              <MenuItem onClick={this.onAddVideoClick}>Add YouTube video</MenuItem>\n            </Menu>\n          </div>\n\n          {/* todo: move dialog to external component */}\n          <Dialog open={videoDialogOpen} onClose={this.onVideoDialogClose}>\n            <DialogTitle id=\"form-dialog-title\">Add YouTube video</DialogTitle>\n            <DialogContent>\n              <DialogContentText>Please copy and paste a link to YouTube video.</DialogContentText>\n              <TextField\n                autoFocus\n                margin=\"dense\"\n                id=\"video\"\n                label=\"Enter link\"\n                value={videoUrl}\n                onChange={this.onVideoUrlChange}\n                fullWidth\n              />\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={this.onVideoDialogClose} color=\"primary\">Cancel</Button>\n              <Button onClick={this.onVideoDialogAdd} color=\"primary\">Add</Button>\n            </DialogActions>\n          </Dialog>\n\n          <div className={style.status}>\n            <Badge color=\"secondary\" badgeContent={'!'} invisible={isSaved}>\n              <div className={[style.statusText, isSaved ? style.saved : ''].join(' ')}>\n                {isSaved ? 'All data saved' : 'You have unsaved changes'}\n              </div>\n            </Badge>\n            {!isSaved &&\n            <div>\n              <Button onClick={this.save}>Save</Button>\n            </div>\n            }\n\n          </div>\n\n          <input className={style.hidden} ref={this.uploadImageRef} type=\"file\" onChange={this.addImage}/>\n        </div>\n\n        {!content.length &&\n        <div className={style.empty}>\n          <h1>It seems that there is nothing here yet. Feel free to add some images or video content using the Big Blue button.</h1>\n        </div>\n        }\n\n      </div>\n    );\n  }\n}\n","export function omit<T extends object, K extends keyof T>(target: T, ...omitKeys: K[]): Omit<T, K> {\n  return (Object.keys(target) as K[]).reduce(\n    (res, key) => {\n      if (!omitKeys.includes(key)) {\n        res[key] = target[key];\n      }\n      return res;\n    },\n    {} as any\n  );\n}\n","export * from './editor.container'\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"_2yQmB\",\"controls\":\"_3rG3H\",\"hidden\":\"u_7_0\",\"status\":\"_3mx1P\",\"statusText\":\"uwH82\",\"saved\":\"pF3xl\",\"empty\":\"_1ZUBg\"};","import { createAction } from 'redux-actions';\nimport { ContentModel } from 'app/models';\n\nexport namespace ContentActions {\n  export enum Type {\n    ADD = 'ADD',\n    REMOVE = 'REMOVE',\n    MOVE = 'MOVE',\n    RESIZE = 'RESIZE'\n  }\n\n  export const add = createAction<PartialPick<ContentModel, 'type' | 'previewUrl' | 'data' | 'width' | 'height' | 'options'>>(Type.ADD);\n  export const remove = createAction<PartialPick<ContentModel, 'id'>>(Type.REMOVE);\n  export const move = createAction<PartialPick<ContentModel, 'position'>>(Type.MOVE);\n  export const resize = createAction<PartialPick<ContentModel, 'width' | 'height' | 'position'>>(Type.RESIZE);\n}\n\nexport type ContentActions = Omit<typeof ContentActions, 'Type'>;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rndContainer\":\"_3_GY1\",\"pointNE\":\"U3URj\",\"pointNW\":\"_38eEj\",\"pointSW\":\"_3Cdwn\",\"pointSE\":\"_3k5be\",\"remove\":\"YAUmU\"};","import { Middleware } from 'redux';\n\nexport const logger: Middleware = (store) => (next) => (action) => {\n  if (process.env.NODE_ENV !== 'production') {\n    console.log(action);\n  }\n  return next(action);\n};\n","import { handleActions } from 'redux-actions';\nimport { RootState } from './state';\nimport { ContentModel } from 'app/models';\nimport { ContentActions } from 'app/actions/content.actions';\n\nconst initialState: RootState.ContentState = [];\n\nexport const contentReducer = handleActions<RootState.ContentState, ContentModel>(\n  {\n    [ContentActions.Type.ADD]: (state, action) => {\n      if (action.payload && action.payload.type && action.payload.previewUrl) {\n        // calculate position to show new element below existent\n        const coordY = state.reduce((max, item) => Math.max((item.position.y + item.height), max), 0);\n\n        // calculate the middle of the editor area\n        const coordX = action.payload.options && action.payload.options.editorSize && action.payload.options.editorSize.width\n          ? Math.round((action.payload.options.editorSize.width / 2) - (action.payload.width / 2))\n          : 100;\n\n        return [\n          {\n            id: state.reduce((max, item) => Math.max(item.id || 1, max), 0) + 1,\n            type: action.payload.type,\n            previewUrl: action.payload.previewUrl,\n            data: action.payload.data,\n            width: action.payload.width,\n            height: action.payload.height,\n            position: {\n              x: coordX,\n              y: coordY + 5 // add extra 5px space below the latest element\n            }\n          },\n          ...state\n        ];\n      }\n      return state;\n    },\n\n    [ContentActions.Type.REMOVE]: (state, action) => {\n      return !action.payload || !action.payload.id\n        ? state\n        : state.filter(item => item.id !== action.payload.id);\n    },\n\n    [ContentActions.Type.MOVE]: (state, action) => {\n      if (!action.payload || !action.payload.id || !action.payload.position) {\n        return state;\n      }\n      return state.map(item => item.id !== action.payload.id ? item : {\n          ...item,\n          position: {\n            x: action.payload.position.x || 0,\n            y: action.payload.position.y || 0\n          }\n        }\n      );\n    },\n\n    [ContentActions.Type.RESIZE]: (state, action) => {\n      if (!action.payload || !action.payload.id || !action.payload.width || !action.payload.height || !action.payload.position) {\n        return state;\n      }\n      return state.map(item => item.id !== action.payload.id ? item : {\n          ...item,\n          width: action.payload.width,\n          height: action.payload.height,\n          position: {\n            x: action.payload.position.x || 0,\n            y: action.payload.position.y || 0\n          }\n        }\n      );\n    }\n  },\n\n  initialState\n);\n","import { combineReducers } from 'redux';\nimport { RootState } from './state';\nimport { contentReducer } from './content.reducer';\n\nexport { RootState };\n\n// NOTE: current type definition of Reducer in 'redux-actions' module\n// doesn't go well with redux@4\nexport const rootReducer = combineReducers<RootState>({\n  content: contentReducer as any\n});\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createBrowserHistory } from 'history';\nimport { configureStore } from 'app/store';\nimport { Router } from 'react-router';\nimport { App } from './app';\n\n// prepare store\nconst history = createBrowserHistory();\nconst store = configureStore();\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router history={history}>\n      <App />\n    </Router>\n  </Provider>,\n  document.getElementById('root')\n);\n","import { Store, createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport { logger } from 'app/middleware';\nimport { RootState, rootReducer } from 'app/reducers';\n\nexport function configureStore(initialState?: RootState): Store<RootState> {\n  let middleware = applyMiddleware(logger);\n\n  if (process.env.NODE_ENV !== 'production') {\n    middleware = composeWithDevTools(middleware);\n  }\n\n  const store = createStore(rootReducer, initialState, middleware) as Store<RootState>;\n\n  if (module.hot) {\n    module.hot.accept('app/reducers', () => {\n      const nextReducer = require('app/reducers');\n      store.replaceReducer(nextReducer);\n    });\n  }\n\n  return store;\n}\n"],"sourceRoot":""}