{"version":3,"sources":["webpack:///./app/index.tsx","webpack:///./app/models/content.model.ts","webpack:///./app/components/editor/content/editor-content-item.tsx","webpack:///./app/components/editor/content/editor-content-area.tsx","webpack:///./app/containers/editor/editor.container.tsx","webpack:///./app/utils/index.ts","webpack:///./app/containers/editor/index.ts","webpack:///./app/components/editor/content/style.css?5979","webpack:///./app/containers/editor/style.css","webpack:///./app/actions/content.actions.ts","webpack:///./app/middleware/logger.ts","webpack:///./app/reducers/content.reducer.ts","webpack:///./app/reducers/index.ts","webpack:///./main.tsx","webpack:///./app/store/index.ts"],"names":["module","__webpack_require__","d","__webpack_exports__","App","react__WEBPACK_IMPORTED_MODULE_0__","react_router__WEBPACK_IMPORTED_MODULE_1__","react_router__WEBPACK_IMPORTED_MODULE_2__","app_containers_editor__WEBPACK_IMPORTED_MODULE_3__","react_hot_loader__WEBPACK_IMPORTED_MODULE_4__","_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__","theme","Object","typography","useNextVariants","path","component","ContentModel","editor_content_item_EditorContentItem","_super","EditorContentItem","props","context","_this","call","this","onResize","e","direction","elementRef","delta","position","item","convertPxToNumber","v","Number","replace","resize","id","width","style","height","__assign","onDragStop","move","x","y","onRemove","remove","__extends","prototype","render","imageContainerStyle","backgroundImage","previewUrl","backgroundSize","react","lib","key","className","content_style","size","lockAspectRatio","enableResizing","top","right","bottom","left","topRight","bottomRight","bottomLeft","topLeft","join","onClick","Tooltip_default","a","title","enterDelay","leaveDelay","Close_default","editor_content_area_EditorContentArea","EditorContentArea","apply","arguments","refCallback","element","getSize","getBoundingClientRect","editor_content_area_extends","_a","items","ref","map","Type","ThumbnailTypes","editor_container_Editor","Editor","getEditorSize","editorSize","addContent","type","data","actions","add","options","setState","isSaved","content","window","scrollTo","addImage","event","target","files","file","uploadImageRef","img","Image","onload","reader","FileReader","readAsDataURL","result","toString","IMAGE","URL","revokeObjectURL","src","current","value","createObjectURL","addVideo","url","imageURL","getVideoId","high","VIDEO","onItemMove","params","onItemResize","onItemRemove","length","save","onAddImageClick","click","menuEl","onAddVideoClick","videoDialogOpen","onMenuOpen","currentTarget","onMenuClose","onVideoDialogClose","onVideoDialogAdd","state","videoUrl","onVideoUrlChange","editor_container_extends","urlParts","split","includes","pop","Button_default","variant","color","aria-label","aria-haspopup","Add_default","Menu_default","anchorEl","open","Boolean","onClose","MenuItem_default","Dialog_default","DialogTitle_default","DialogContent_default","DialogContentText_default","TextField_default","autoFocus","margin","label","onChange","fullWidth","DialogActions_default","Badge_default","badgeContent","invisible","__decorate","es","ownProps","dispatch","redux","omitKeys","_i","keys","reduce","res","omit","content_actions","exports","rndContainer","point","pointNE","pointNW","pointSW","pointSE","container","controls","hidden","status","statusText","saved","empty","ContentActions","redux_actions__WEBPACK_IMPORTED_MODULE_0__","ADD","REMOVE","MOVE","RESIZE","logger","store","next","action","contentReducer","handleActions","payload","coordY","max","Math","coordX","round","filter","rootReducer","main_history","history_es","main_store","initialState","middleware","configureStore","react_dom","Router","history","app","document","getElementById"],"mappings":"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","file":"fd859a2dcdd307a25373.js","sourcesContent":["import * as React from 'react';\nimport { Route, Switch } from 'react-router';\nimport { Editor } from 'app/containers/editor';\nimport { hot } from 'react-hot-loader';\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\n\nconst theme = createMuiTheme({\n  typography: {\n    useNextVariants: true,\n  },\n});\n\nexport const App = hot(module)(() => (\n  <MuiThemeProvider theme={theme}>\n    <Switch>\n      <Route path=\"/\" component={Editor} />\n    </Switch>\n  </MuiThemeProvider>\n));\n","export interface ContentModel {\n  id: number;\n  type: ContentModel.Type;\n  previewUrl: string; // base64 for image, video thumbnail for video\n  data: string;       // base64 for image, video url for video\n  width: number;\n  height: number;\n  position: ContentModel.Coordinates;\n  options?: {\n    editorSize?:  ClientRect | DOMRect\n  }\n}\n\nexport namespace ContentModel {\n  export enum Type {\n    IMAGE = 'image',\n    VIDEO = 'video'\n  }\n\n  export interface Coordinates {\n    x: number;\n    y: number;\n  }\n}\n","import * as React from 'react';\nimport { DraggableData, Position, ResizableDelta, Rnd } from 'react-rnd';\n\nimport CloseIcon from '@material-ui/icons/Close';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport * as style from './style.css';\nimport { ContentModel } from 'app/models';\nimport { ContentActions } from 'app/actions/content.actions';\n\nexport namespace EditorContentItem {\n  export interface Props {\n    item: ContentModel;\n    remove: typeof ContentActions.remove;\n    move: typeof ContentActions.move;\n    resize: typeof ContentActions.resize;\n  }\n\n  export type ResizableDirection = 'top' | 'right' | 'bottom' | 'left' | 'topRight' | 'bottomRight' | 'bottomLeft' | 'topLeft';\n}\n\nexport class EditorContentItem extends React.Component<EditorContentItem.Props> {\n  constructor(props: EditorContentItem.Props, context?: any) {\n    super(props, context);\n  }\n\n  onResize = (\n    e: MouseEvent | TouchEvent,\n    direction: EditorContentItem.ResizableDirection,\n    elementRef: HTMLDivElement,\n    delta: ResizableDelta,\n    position: Position\n  ) => {\n    const { item } = this.props;\n    const convertPxToNumber = (v: string) => Number(v.replace(/px/i, ''));\n\n    this.props.resize({\n      id: item.id,\n      width: convertPxToNumber(elementRef.style.width),   // we keep dimensions as a number\n      height: convertPxToNumber(elementRef.style.height),\n      position: { ...position }\n    });\n  };\n\n  onDragStop = (e: Event, d: DraggableData) => {\n    const { item } = this.props;\n    this.props.move({\n      id: item.id,\n      position: { x: d.x, y: d.y }\n    });\n  };\n\n  onRemove = () => {\n    const { item } = this.props;\n    this.props.remove({\n      id: item.id,\n    });\n  };\n\n  render() {\n    const { item } = this.props;\n\n    const imageContainerStyle = {\n      backgroundImage: `url(${item.previewUrl})`,\n      backgroundSize: 'contain',\n      width: item.width,\n      height: item.height\n    };\n\n    return (\n      <Rnd\n        key={item.id}\n        className={style.rndContainer}\n        size={{ width: item.width, height: item.height }}\n        position={{ x: item.position.x, y: item.position.y }}\n        lockAspectRatio={true}\n        enableResizing={{\n          top: false,\n          right: false,\n          bottom: false,\n          left: false,\n          topRight: true,\n          bottomRight: true,\n          bottomLeft: true,\n          topLeft: true\n        }}\n        onDragStop={this.onDragStop}\n        onResize={this.onResize}\n      >\n        <div style={imageContainerStyle}>\n          <span className={[style.point, style.pointNE].join(' ')}/>\n          <span className={[style.point, style.pointNW].join(' ')}/>\n          <span className={[style.point, style.pointSE].join(' ')}/>\n          <span className={[style.point, style.pointSW].join(' ')}/>\n          <span className={style.remove} onClick={this.onRemove}>\n            <Tooltip title=\"Remove permanently\" enterDelay={300} leaveDelay={0}>\n              <CloseIcon/>\n            </Tooltip>\n          </span>\n        </div>\n      </Rnd>\n    );\n\n  }\n}\n","import * as React from 'react';\nimport { ContentModel } from 'app/models';\nimport { ContentActions } from 'app/actions/content.actions';\nimport { EditorContentItem } from './editor-content-item';\n\nexport namespace EditorContentArea {\n  export interface Props {\n    items: ContentModel[];\n    remove: typeof ContentActions.remove;\n    move: typeof ContentActions.move;\n    resize: typeof ContentActions.resize;\n    getSize: (size: ClientRect | DOMRect) => void\n  }\n}\n\nexport class EditorContentArea extends React.Component<EditorContentArea.Props> {\n  refCallback = (element: any) => {\n    if (element) {\n      this.props.getSize(element.getBoundingClientRect());\n    }\n  };\n\n  render() {\n    const { items, remove, move, resize } = this.props;\n    return (\n      <div ref={this.refCallback}>\n        {items.map((item) => (\n          <EditorContentItem\n            key={item.id}\n            item={item}\n            remove={remove}\n            move={move}\n            resize={resize}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\n\nimport Button from '@material-ui/core/Button';\nimport AddIcon from '@material-ui/icons/Add';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Badge from '@material-ui/core/Badge';\n\nimport * as style from './style.css';\nimport { RouteComponentProps } from 'react-router';\nimport { RootState } from 'app/reducers';\nimport { ContentActions } from 'app/actions/content.actions';\nimport { connect } from 'react-redux';\nimport { omit } from 'app/utils';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { EditorContentArea } from 'app/components/editor/content';\nimport { ContentModel } from 'app/models';\nimport { ChangeEvent, RefObject } from 'react';\n\n\nexport namespace Editor {\n  export interface Props extends RouteComponentProps<void> {\n    content: RootState.ContentState;\n    actions: ContentActions;\n  }\n\n  export interface State {\n    isSaved: boolean;\n    menuEl: HTMLElement;\n    videoDialogOpen: boolean;\n    videoUrl: string;\n  }\n}\n\nexport enum ThumbnailTypes {\n  default = 'default',      // 120x90\n  high = 'hqdefault',       // 480x360\n  medium = 'mqdefault',     // 320x180\n  standard = 'sddefault',   // 640x480\n  maximum = 'maxresdefault' // 1280x720\n}\n\n\n@connect(\n  (state: RootState, ownProps): Pick<Editor.Props, 'content'> => {\n    return { content: state.content };\n  },\n  (dispatch: Dispatch): Pick<Editor.Props, 'actions'> => ({\n    actions: bindActionCreators(omit(ContentActions, 'Type'), dispatch)\n  })\n)\nexport class Editor extends React.Component<Editor.Props, Editor.State> {\n\n  uploadImageRef: RefObject<HTMLInputElement>;\n  editorSize: ClientRect | DOMRect;\n\n  constructor(props: Editor.Props, context?: any) {\n    super(props, context);\n\n    this.uploadImageRef = React.createRef();\n\n    this.state = {\n      isSaved: true,\n      menuEl: null,\n      videoDialogOpen: false,\n      videoUrl: ''\n    };\n  }\n  \n  // Helpers\n\n  // todo: move to utils\n  getVideoId(url: string) {\n    const urlParts = url.split('?');\n    return urlParts.length > 1 && urlParts[1].includes('v=')\n      ? urlParts[1].split('v=')[1]\n      : url.split('/').pop();\n  };\n\n  getEditorSize = (size: ClientRect | DOMRect) => {\n    this.editorSize = size;\n  };\n\n  // Content handlers\n\n  addContent = (type: ContentModel.Type, previewUrl: string, data: string, width: number, height: number) => {\n    this.props.actions.add({ type, data, previewUrl, width, height, options: { editorSize: this.editorSize } });\n    this.setState({ isSaved: false });\n\n    // scroll to the bottom, but yep, it's a pretty simple trick\n    // todo: get the last added element by ref and scroll into view of it?\n    if (this.props.content[0]) window.scrollTo(0, this.props.content[0].position.y);\n  };\n\n  addImage = (event: ChangeEvent<HTMLInputElement>) => {\n    if (!event.target.files || !event.target.files[0]) {\n      return;\n    }\n\n    const file = event.target.files[0];\n    const addContent = this.addContent;\n    const uploadImageRef = this.uploadImageRef;\n\n    const img = new Image();\n    img.onload = () => {  // we use an Image object here to get original width and height\n      let reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {   // read base64 string\n        const data = reader.result.toString();\n        addContent(ContentModel.Type.IMAGE, data, data, img.width, img.height);\n        URL.revokeObjectURL(img.src); // cleanup memory\n        uploadImageRef.current.value = '';  // cleanup file input\n      };\n    };\n\n    img.src = URL.createObjectURL(file);\n  };\n\n  addVideo = (url: string) => {\n    if (!url) {\n      return;\n    }\n\n    const videoId = this.getVideoId(url);\n    const imageURL = `https://img.youtube.com/vi/${videoId}/${ThumbnailTypes.high}.jpg`;\n    const addContent = this.addContent;\n\n    const img = new Image();\n    img.onload = () => {\n      addContent(ContentModel.Type.VIDEO, imageURL, url, img.width, img.height);\n    };\n    img.src = imageURL;\n  };\n\n  onItemMove: typeof ContentActions.move = (params) => {\n    this.setState({ isSaved: false });\n    return this.props.actions.move(params);\n  };\n\n  onItemResize: typeof ContentActions.resize = (params) => {\n    this.setState({ isSaved: false });\n    return this.props.actions.resize(params);\n  };\n\n  onItemRemove: typeof ContentActions.remove = (params) => {\n    this.setState({ isSaved: this.props.content.length === 1 });\n    return this.props.actions.remove(params);\n  };\n\n  save = () => {\n    // todo: save all content data on a server\n    this.setState({ isSaved: true });\n  };\n\n  // Interface handlers\n\n  onAddImageClick = () => {\n    this.uploadImageRef.current.click();\n    this.setState({ menuEl: null });\n  };\n\n  onAddVideoClick = () => {\n    this.setState({\n      videoDialogOpen: true,\n      menuEl: null\n    });\n  };\n\n  onMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\n    this.setState({ menuEl: event.currentTarget });\n  };\n\n  onMenuClose = () => {\n    this.setState({ menuEl: null });\n  };\n\n  onVideoDialogClose = () => {\n    this.setState({ videoDialogOpen: false });\n  };\n\n  onVideoDialogAdd = () => {\n    if (this.state.videoUrl) {\n      this.addVideo(this.state.videoUrl);\n    }\n    this.setState({\n      videoUrl: '',\n      videoDialogOpen: false\n    });\n  };\n\n  onVideoUrlChange = (event: ChangeEvent<HTMLInputElement>) => {\n    this.setState({ videoUrl: event.target.value });\n  };\n\n  // Render\n\n  render() {\n    const { content } = this.props;\n    const { menuEl, videoDialogOpen, videoUrl, isSaved } = this.state;\n\n    return (\n      <div>\n        <div className={style.container}>\n          <EditorContentArea\n            items={content}\n            remove={this.onItemRemove}\n            move={this.onItemMove}\n            resize={this.onItemResize}\n            getSize={this.getEditorSize}\n          />\n\n          <div className={style.controls}>\n            <Tooltip title=\"Add a new image or video\" enterDelay={500} leaveDelay={0}>\n              <Button\n                variant=\"fab\"\n                color=\"primary\"\n                aria-label=\"Add\"\n                aria-haspopup=\"true\"\n                onClick={this.onMenuOpen}\n              >\n                <AddIcon/>\n              </Button>\n            </Tooltip>\n            <Menu\n              id=\"add-menu\"\n              anchorEl={menuEl}\n              open={Boolean(menuEl)}\n              onClose={this.onMenuClose}\n            >\n              <MenuItem onClick={this.onAddImageClick}>Add a new image</MenuItem>\n              <MenuItem onClick={this.onAddVideoClick}>Add YouTube video</MenuItem>\n            </Menu>\n          </div>\n\n          {/* todo: move dialog to external component */}\n          <Dialog open={videoDialogOpen} onClose={this.onVideoDialogClose}>\n            <DialogTitle id=\"form-dialog-title\">Add YouTube video</DialogTitle>\n            <DialogContent>\n              <DialogContentText>Please copy and paste a link to YouTube video.</DialogContentText>\n              <TextField\n                autoFocus\n                margin=\"dense\"\n                id=\"video\"\n                label=\"Enter link\"\n                value={videoUrl}\n                onChange={this.onVideoUrlChange}\n                fullWidth\n              />\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={this.onVideoDialogClose} color=\"primary\">Cancel</Button>\n              <Button onClick={this.onVideoDialogAdd} color=\"primary\">Add</Button>\n            </DialogActions>\n          </Dialog>\n\n          <div className={style.status}>\n            <Badge color=\"secondary\" badgeContent={'!'} invisible={isSaved}>\n              <div className={[style.statusText, isSaved ? style.saved : ''].join(' ')}>\n                {isSaved ? 'All data saved' : 'You have unsaved changes'}\n              </div>\n            </Badge>\n            {!isSaved &&\n            <div>\n              <Button onClick={this.save}>Save</Button>\n            </div>\n            }\n\n          </div>\n\n          <input className={style.hidden} ref={this.uploadImageRef} type=\"file\" onChange={this.addImage}/>\n        </div>\n\n        {!content.length &&\n        <div className={style.empty}>\n          <h1>It seems that there is nothing here yet. Feel free to add some images or video content using the Big Blue button.</h1>\n        </div>\n        }\n\n      </div>\n    );\n  }\n}\n","export function omit<T extends object, K extends keyof T>(target: T, ...omitKeys: K[]): Omit<T, K> {\n  return (Object.keys(target) as K[]).reduce(\n    (res, key) => {\n      if (!omitKeys.includes(key)) {\n        res[key] = target[key];\n      }\n      return res;\n    },\n    {} as any\n  );\n}\n","export * from './editor.container'\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rndContainer\":\"_3_GY1\",\"point\":\"_1XJdf\",\"pointNE\":\"U3URj\",\"pointNW\":\"_38eEj\",\"pointSW\":\"_3Cdwn\",\"pointSE\":\"_3k5be\",\"remove\":\"YAUmU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"_2yQmB\",\"controls\":\"_3rG3H\",\"hidden\":\"u_7_0\",\"status\":\"_3mx1P\",\"statusText\":\"uwH82\",\"saved\":\"pF3xl\",\"empty\":\"_1ZUBg\"};","import { createAction } from 'redux-actions';\nimport { ContentModel } from 'app/models';\n\nexport namespace ContentActions {\n  export enum Type {\n    ADD = 'ADD',\n    REMOVE = 'REMOVE',\n    MOVE = 'MOVE',\n    RESIZE = 'RESIZE'\n  }\n\n  export const add = createAction<PartialPick<ContentModel, 'type' | 'previewUrl' | 'data' | 'width' | 'height' | 'options'>>(Type.ADD);\n  export const remove = createAction<PartialPick<ContentModel, 'id'>>(Type.REMOVE);\n  export const move = createAction<PartialPick<ContentModel, 'position'>>(Type.MOVE);\n  export const resize = createAction<PartialPick<ContentModel, 'width' | 'height' | 'position'>>(Type.RESIZE);\n}\n\nexport type ContentActions = Omit<typeof ContentActions, 'Type'>;\n","import { Middleware } from 'redux';\n\nexport const logger: Middleware = (store) => (next) => (action) => {\n  if (process.env.NODE_ENV !== 'production') {\n    console.log(action);\n  }\n  return next(action);\n};\n","import { handleActions } from 'redux-actions';\nimport { RootState } from './state';\nimport { ContentModel } from 'app/models';\nimport { ContentActions } from 'app/actions/content.actions';\n\nconst initialState: RootState.ContentState = [];\n\nexport const contentReducer = handleActions<RootState.ContentState, ContentModel>(\n  {\n    [ContentActions.Type.ADD]: (state, action) => {\n      if (action.payload && action.payload.type && action.payload.previewUrl) {\n        // calculate position to show new element below existent\n        const coordY = state.reduce((max, item) => Math.max((item.position.y + item.height), max), 0);\n\n        // calculate the middle of the editor area\n        const coordX = action.payload.options && action.payload.options.editorSize && action.payload.options.editorSize.width\n          ? Math.round((action.payload.options.editorSize.width / 2) - (action.payload.width / 2))\n          : 100;\n\n        return [\n          {\n            id: state.reduce((max, item) => Math.max(item.id || 1, max), 0) + 1,\n            type: action.payload.type,\n            previewUrl: action.payload.previewUrl,\n            data: action.payload.data,\n            width: action.payload.width,\n            height: action.payload.height,\n            position: {\n              x: coordX,\n              y: coordY + 5 // add extra 5px space below the latest element\n            }\n          },\n          ...state\n        ];\n      }\n      return state;\n    },\n\n    [ContentActions.Type.REMOVE]: (state, action) => {\n      return !action.payload || !action.payload.id\n        ? state\n        : state.filter(item => item.id !== action.payload.id);\n    },\n\n    [ContentActions.Type.MOVE]: (state, action) => {\n      if (!action.payload || !action.payload.id || !action.payload.position) {\n        return state;\n      }\n      return state.map(item => item.id !== action.payload.id ? item : {\n          ...item,\n          position: {\n            x: action.payload.position.x || 0,\n            y: action.payload.position.y || 0\n          }\n        }\n      );\n    },\n\n    [ContentActions.Type.RESIZE]: (state, action) => {\n      if (!action.payload || !action.payload.id || !action.payload.width || !action.payload.height || !action.payload.position) {\n        return state;\n      }\n      return state.map(item => item.id !== action.payload.id ? item : {\n          ...item,\n          width: action.payload.width,\n          height: action.payload.height,\n          position: {\n            x: action.payload.position.x || 0,\n            y: action.payload.position.y || 0\n          }\n        }\n      );\n    }\n  },\n\n  initialState\n);\n","import { combineReducers } from 'redux';\nimport { RootState } from './state';\nimport { contentReducer } from './content.reducer';\n\nexport { RootState };\n\n// NOTE: current type definition of Reducer in 'redux-actions' module\n// doesn't go well with redux@4\nexport const rootReducer = combineReducers<RootState>({\n  content: contentReducer as any\n});\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createBrowserHistory } from 'history';\nimport { configureStore } from 'app/store';\nimport { Router } from 'react-router';\nimport { App } from './app';\n\n// prepare store\nconst history = createBrowserHistory();\nconst store = configureStore();\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router history={history}>\n      <App />\n    </Router>\n  </Provider>,\n  document.getElementById('root')\n);\n","import { Store, createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport { logger } from 'app/middleware';\nimport { RootState, rootReducer } from 'app/reducers';\n\nexport function configureStore(initialState?: RootState): Store<RootState> {\n  let middleware = applyMiddleware(logger);\n\n  if (process.env.NODE_ENV !== 'production') {\n    middleware = composeWithDevTools(middleware);\n  }\n\n  const store = createStore(rootReducer, initialState, middleware) as Store<RootState>;\n\n  if (module.hot) {\n    module.hot.accept('app/reducers', () => {\n      const nextReducer = require('app/reducers');\n      store.replaceReducer(nextReducer);\n    });\n  }\n\n  return store;\n}\n"],"sourceRoot":""}